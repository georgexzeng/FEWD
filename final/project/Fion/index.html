<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>wwwild</title>
        <meta name="WWWild, wild, animals, wildlife, nature" content="Capture and Share the World's Wildlife. WWWild is a fun and beautiful way to map the natural world onto the world wide web.">
        <meta name="viewport" content="width=device-width">
        <script src='http://api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.js'></script>
        <link href='http://api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.css' rel='stylesheet' />
          <!--[if lte IE 8]>
            <link href='//api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.ie.css' rel='stylesheet'>
          <![endif]-->

        <link rel="stylesheet" type="text/css" href="css/main.css">
        <link rel="stylesheet" type="text/css" href="css/normalize.css">
        <link rel="stylesheet" type="text/css" href="css/960_12_col.css">
    </head>
    <body>

    <div id="headerwrapper" class="clearfix"> 
            <header>
                <h1>wwwild</h1>
      <!--           <h2>Mapping the natural world onto the world wide web</h2> -->
            </header>
            <div id="search">
              <input type="text" name="search" placeholder="Tofino"/> 
            </div>

            <div>
              <a href="index.html"><img id="mapicon" src="images/map.jpg" width="50px"></a> 
            </div>

            <div>
              <a href="viewall.html"><img id="listicon" src="images/list.jpg" width="50px"></a>
            </div>

           

            <div>
              <a id="signin" href="#">Sign In</a> 
              <a id="checkin" href="#">Check In</a>
            </div> 

  <div id='output'>
    click: <code id='click'></code><br/>
    mousemove: <code id='mousemove'></code><br/>
  </div>
  <div id='map'></div>
  <!-- <div id='info'></div> -->
  <style>
  .popup {
      text-align: center;
  }
  .popup img {
      width: 100%;
  }
  </style>

  <script>
  var map = L.mapbox.map('map', 'dileung.map-8cts8z58');
  var geocoder = L.mapbox.geocoder('dileung.map-8cts8z58'); 

  geocoder.query('Tofino', function(error, result){
    console.log(error);
    console.log(result); 
    map.setView([result.latlng[0], result.latlng[1]], 13)
  ; }); 


  function showMap(err, data) {
       map.fitBounds(data.lbounds);
  }

  var click = document.getElementById('click'),
    mousemove = document.getElementById('mousemove');

  map.on('mousemove click', function(e) {
    window[e.type].innerHTML = e.containerPoint.toString() + ', ' + e.latlng.toString();
  });

// markers 

var geoJson = {
    type: 'FeatureCollection',
    features: [{
        type: 'Feature',
        properties: {
            title: 'Wolf',
      description: 'saw it going for a swim',    
      'marker-size': 'medium',
          'marker-color': '#f0a',
          "image": "./images/wolf.jpg"
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.858816464705, 49.1195930894399]
        }
    },
    {
        type: 'Feature',
        properties: {
            title: 'Killer Whales',
            description: 'Hello Killer Whale family!',    
      'marker-size': 'medium',
          'marker-color': '#f0a', 
          'image': 'images/killerwhales.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.958816464705, 49.1225930894399]
        }
    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Puffin',
            description: 'bird',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/puffin.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.88032, 49.10635]
        }
    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Black Bear',
            description: 'Trying to get lucky with fish during low tide',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/bear.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.87105, 49.14949]
        }

    }, 
    
    {
        type: 'Feature',
        properties: {
            title: 'Grey whale',
            description: 'Saw 20 grey whales feeding in the bay area!',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/greywhale.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.96701 , 49.14904]
        }

    },
   {
        type: 'Feature',
        properties: {
            title: 'Humpback Whale',
            description: 'Just wow',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/humpback1.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.95877 , 49.14489]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Humpback Whale',
            description: 'Kayaking is the best way to whale watch',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/humpback3.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.95173 , 49.13882]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Seals',
            description: 'just chilling',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/sealisland.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.92375 , 49.11141]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Sea Otters',
            description: 'lol',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/seaotters.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.92323 , 49.12208]
        }

    }, 
   {
        type: 'Feature',
        properties: {
            title: 'Bear',
            description: '#drinking #lake',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/bear1.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.85835 , 49.14882]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Bear',
            description: 'mom and baby!',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/bear2.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.81972 , 49.1386]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Sea Lions',
            description: 'lol',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/sealion.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.92031 , 49.1104]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Dolphins',
            description: 'omg!!!',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/dolphins.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.96409 , 49.09601]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Deers',
            description: 'lol',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/deers.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.87225 , 49.10961]
        }

    }, 
    {
        type: 'Feature',
        properties: {
            title: 'Grey Whales',
            description: 'hello!! you are so friendly!',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/greywhale1.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.97816 , 49.14769]
        }

    },
   {
        type: 'Feature',
        properties: {
            title: 'Bald Eagle',
            description: '#family',    
            'marker-size': 'medium',
            'marker-color': '#f0a', 
            'image': 'images/baldeagle.jpg'
        },
        geometry: {
            type: 'Point',
            coordinates: [-125.89766 , 49.10883]
        }

    }


    ]}; 


map.markerLayer.on('layeradd', function(e) {
    var marker = e.layer,
        feature = marker.feature;

    // Create custom popup content
    var popupContent =  '<a target="_blank" class="popup" href="' + feature.properties.url + '">' +
                            '<img src="' + feature.properties.image + '">' +
                        '   <h2>' + feature.properties.title + '</h2>' + '<p>' + feature.properties.description + '</p>' + 
                        '</a>';

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent,{
        closeButton: false,
        minWidth: 320
    }).on('mouseover', function() { marker.openPopup(); }).on('mouseout', function() { marker.closePopup(); });

});

map.markerLayer.setGeoJSON(geoJson); 

</script>

</body>
</html>
